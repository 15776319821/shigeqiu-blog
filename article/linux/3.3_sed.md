# sed

<!-- TOC -->

- [sed](#sed)
    - [介绍](#介绍)
    - [参数](#参数)
    - [function有下面这些参数](#function有下面这些参数)
    - [替换标记](#替换标记)
    - [元字符集](#元字符集)
    - [逗号分隔](#逗号分隔)

<!-- /TOC -->

## 介绍

Linux命令sed是“stream editor”的缩写，也就是流编辑器，它一次处理一行内容，处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。

## 参数

- `-n` ：安静模式。在sed的一般用法中，所有来自文件中的数据都会被列出到屏幕上，如果加上-n，则只有经过sed特殊处理的那行（或`操作）才会被列出来。
- `-e` ：直接在命令行模式下进行sed的动作编辑。
- `-f` ：直接将sed的动作写在一个文件内，`-f filename` 则可以执行file内的sed动作。
- `-r` ：sed的动作支持的是扩展型正则表达式的语法（默认是基础正则表达式的语法）。
- `-i` ：可直接对源文件内容进行修改。。**`危险操作`**
- `-h` : 或–help：显示帮助；
- `-V` : 或–version：显示版本信息



## function有下面这些参数

- `i` ：插入，在目标行的上面新增一行。
- `a` ：插入，在目标行的下面新增一行。
- `d` ：删除所选行。
- `p` ：打印，也就是将某个选择的数据打印出来，通常参数-p与参数-n搭配使用。
- `s` ：替换，可以直接进行替换的工作。
- `c` ：替换，c的后面可以接替字符串，这些字符串可以替换n1，n2之间的行。
- `w` ：写并追加模板块到file末尾。
- `W` ： 写并追加模板块的第一行到file末尾。
- `!` ：表示后面的命令对所有没有被选定的行发生作用。
- `=` ：打印当前行号; 
- `#` : 把注释扩展到下一个换行符以前。

> **以上参数皆不改变原文件内容**

## 替换标记

- `g ` ：表示行内全面替换;
- `x ` ：表示互换模板块中的文本和缓冲区中的文本;
- `y ` ：表示把一个字符翻译为另外的字符（但是不用于正则表达式）;
- `\1` ： 子串匹配标记;
- `& ` ：已匹配字符串标记;

## 元字符集

- `^`  匹配行开始，如：/^ sed/匹配所有以sed开头的行
- `$`  匹配行结束，如：/sed$/匹配所有以sed结尾的行;
- `.` ： 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，后是d;
- `*` ：匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行;
- `[ ]` 匹配一个指定范围内的字符，如/[ss]ed/匹配sed和Sed;
- `[ ^]` 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行;
- `\  (…\ )` 匹配子串，保存匹配的字符，如s/(love)able/\1rs，loveable被替换成lovers;
- `&`  保存搜索字符用来替换其他字符，如s/love/&/，love这成love;
- `<`  匹配单词的开始，如:/\
- `>`  匹配单词的结束，如/love>/匹配包含以love结尾的单词的行;
- `x {m}` 重复字符x，m次，如：/0{5}/匹配包含5个0的行;
- `x {m,}` 重复字符x，至少m次，如：/0{5,}/匹配至少有5个0的行; x{m,n} 重复字符x，至少m次，不多于n次，如：/0{5,10}/匹配5~10个0的行;

## 逗号分隔

告诉sed你期望处理的行，由逗号分隔的两个数字表示，$符号表示最后一行；
当然也可以使用正则来定位期望处理的行。

```
sed -n '2,$p' hello.txt
```